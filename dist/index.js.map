{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {BrowserRouter as Router, Route, Switch, Redirect, Link} from 'react-router-dom'\n\nexport class OutLet extends Component {\n  static propTypes = {\n    forRoot: PropTypes.array\n  }\n\n  render() {\n\n    const {\n      forRoot\n    } = this.props\n\n    return (\n      <Router>\n        <Switch>\n          {forRoot.map((item, index) => {\n            return <RouterConfig key={index} component={item.component} path={item.path} item={item}/>\n          })}\n        </Switch>\n      </Router>\n    )\n  }\n}\n\nexport class Atag extends Component {\n\n  static propTypes = {\n    routeLink: PropTypes.string,\n    children: PropTypes.any,\n    routerLinkActive: PropTypes.string,\n    queryParams: PropTypes.object\n  }\n\n  render() {\n\n    const {\n      routeLink,\n      children,\n      routerLinkActive,\n      queryParams\n    } = this.props\n\n    let queryArr = [],\n      readyQueryParams\n\n    for (let query in queryParams) {\n      queryArr.push(query)\n    }\n    readyQueryParams = `${routeLink}${queryArr.map((item, index) => (\n      `${index === 0 ? '?' : ''}${item}=${queryParams[item]}${index !== queryArr.length - 1 ? '&' : ''}`\n    ))}`.split(',').join('')\n\n    return (\n      <React.Fragment>\n        <Link to={readyQueryParams}>\n          {children}\n        </Link>\n      </React.Fragment>\n    )\n  }\n}\n\nconst RouterConfig = ({item, ...rest}) => {\n\n  const Component = item.component\n\n  if (item.path === '**') {\n    return <Route {...rest} />\n  }\n\n  if (item.redirectTo) {\n    return <Redirect {...rest} from={`/${item.path}`} to={item.redirectTo}/>\n  }\n\n  if (item.canActivate) {\n\n    const isRouteRender = () => {\n      let guard = true\n      for (let index = 0; index < item.canActivate.length; index++) {\n        if (item.canActivate[index]() === false) {\n          guard = false\n          break\n        }\n      }\n      return guard\n    }\n\n    return <Route path={item.path} render={(props) => (\n      isRouteRender() ? <Component {...props} /> : <Redirect to='/not-found'/>\n    )}/>\n  }\n\n  return <Route {...rest} render={(props) => <Component {...props} />}/>\n}\n"],"names":["OutLet","forRoot","props","React","map","item","index","component","path","Component","propTypes","PropTypes","array","Atag","routeLink","children","routerLinkActive","queryParams","queryArr","readyQueryParams","query","push","length","split","join","string","any","object","RouterConfig","rest","Route","redirectTo","Redirect","canActivate","isRouteRender","guard"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIaA,MAAb;;;;;;;;;;6BAKW;UAGLC,OAHK,GAIH,KAAKC,KAJF,CAGLD,OAHK;;;aAOLE;oCAAA;;;+BACE;;kBACWC,GAAR,CAAY,UAACC,IAAD,EAAOC,KAAP,EAAiB;mBACrBH,6BAAC,YAAD,IAAc,KAAKG,KAAnB,EAA0B,WAAWD,KAAKE,SAA1C,EAAqD,MAAMF,KAAKG,IAAhE,EAAsE,MAAMH,IAA5E,GAAP;WADD;;OAHP;;;;EAXwBI,eAA5B;;AAAaT,OACJU,YAAY;WACRC,UAAUC;;AAqBvB,IAAaC,IAAb;;;;;;;;;;6BASW;mBAOH,KAAKX,KAPF;UAGLY,SAHK,UAGLA,SAHK;UAILC,QAJK,UAILA,QAJK;UAKLC,gBALK,UAKLA,gBALK;UAMLC,WANK,UAMLA,WANK;;;UASHC,WAAW,EAAf;UACEC,yBADF;;WAGK,IAAIC,KAAT,IAAkBH,WAAlB,EAA+B;iBACpBI,IAAT,CAAcD,KAAd;;yBAEiB,MAAGN,SAAH,GAAeI,SAASd,GAAT,CAAa,UAACC,IAAD,EAAOC,KAAP;qBAC1CA,UAAU,CAAV,GAAc,GAAd,GAAoB,EADsB,IACjBD,IADiB,SACTY,YAAYZ,IAAZ,CADS,IACWC,UAAUY,SAASI,MAAT,GAAkB,CAA5B,GAAgC,GAAhC,GAAsC,EADjD;OAAb,CAAf,EAEdC,KAFc,CAER,GAFQ,EAEHC,IAFG,CAEE,EAFF,CAAnB;;aAKErB;sBAAA,CAAO,QAAP;;;6BACE;YAAM,IAAIgB,gBAAV;;;OAFJ;;;;EA5BsBV,eAA1B;;AAAaI,KAEJH,YAAY;aACNC,UAAUc,MADJ;YAEPd,UAAUe,GAFH;oBAGCf,UAAUc,MAHX;eAIJd,UAAUgB;;AAgC3B,IAAMC,eAAe,SAAfA,YAAe,OAAqB;MAAnBvB,IAAmB,QAAnBA,IAAmB;MAAVwB,IAAU;;;MAElCpB,YAAYJ,KAAKE,SAAvB;;MAEIF,KAAKG,IAAL,KAAc,IAAlB,EAAwB;WACfL,6BAAC2B,oBAAD,EAAWD,IAAX,CAAP;;;MAGExB,KAAK0B,UAAT,EAAqB;WACZ5B,6BAAC6B,uBAAD,eAAcH,IAAd,IAAoB,YAAUxB,KAAKG,IAAnC,EAA2C,IAAIH,KAAK0B,UAApD,IAAP;;;MAGE1B,KAAK4B,WAAT,EAAsB;;QAEdC,gBAAgB,SAAhBA,aAAgB,GAAM;UACtBC,QAAQ,IAAZ;WACK,IAAI7B,QAAQ,CAAjB,EAAoBA,QAAQD,KAAK4B,WAAL,CAAiBX,MAA7C,EAAqDhB,OAArD,EAA8D;YACxDD,KAAK4B,WAAL,CAAiB3B,KAAjB,QAA8B,KAAlC,EAAyC;kBAC/B,KAAR;;;;aAIG6B,KAAP;KARF;;WAWOhC,6BAAC2B,oBAAD,IAAO,MAAMzB,KAAKG,IAAlB,EAAwB,QAAQ,gBAACN,KAAD;eACrCgC,kBAAkB/B,6BAAC,SAAD,EAAeD,KAAf,CAAlB,GAA6CC,6BAAC6B,uBAAD,IAAU,IAAG,YAAb,GADR;OAAhC,GAAP;;;SAKK7B,6BAAC2B,oBAAD,eAAWD,IAAX,IAAiB,QAAQ,gBAAC3B,KAAD;aAAWC,6BAAC,SAAD,EAAeD,KAAf,CAAX;KAAzB,IAAP;CA9BF;;;;;"}